{% extends "users/profile.html" %}
{% load crispy_forms_tags %}

{% block title %} Admin Dashboard - FDLS {% endblock title %}

{% block contentadmin %}
 
 <!--FOR CASH PAYMENTS-->
 <div class="row">
    <div class="col-md-12 col-sm- 12, col-xl-12">
        <h4 class="p-3 shadow-sm text-center text-dark"> CASH-PAYMENT REQUEST</h4>
        <table class="table table-striped table-dark">
            <thead>
            <tr>
                <th scope="col">No</th>
                <th scope="col">Customer</th>
                <th scope="col">Date</th>
                <th scope="col">Request Details</th>
                <th scope="col">TP Choice</th>
                <th scope="col">Status</th>
                <th scope="col">Amount</th>
                <th scope="col">Paid Status</th>
                <th scope="col">Order ID</th>
                <th scope="col">Assigned</th>
                <th scope="col">Update</th>
                <th scope="col">Remove</th>
            </tr>
            </thead>
            <tbody>
            {% for i in page_obj2 %}
            <tr>
                <th scope="row">{{forloop.counter}}</th>
                <td>{{i.customer}}</td>
                <td>{{i.date_created|timesince}}</td>
                <td>
                    <div class="dropdown">
                        <p class="dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          r
                        </p>
                        <div class="dropdown-menu p-2 user-select-all" style="background-color: rgb(0, 30, 202);" aria-labelledby="dropdownMenuButton">
                          <small class=" text-white"> <strong> Reciever Name:</strong> {{i.reciever_name}}  </small>
                          <br>
                          <small class=" text-white"><strong>Reciever Number:</strong> {{i.reciever_phone_number}} </small>
                          <br>
                          <small class=" text-white"><strong>Address of Reciever:</strong> {{i.Address_of_reciever}} </small>
                          <br>
                          <small class=" text-white"><strong>Package Description:</strong> {{i.Package_description}} </small>
                          <br>
                          <small class=" text-white"><strong>Sender Location:</strong> {{i.Your_location}} </small>
                    </div>
                </td>

                <td>{{i.Choice_for_TP}}</td>
                <td>{{i.status}}</td> 
                <td>{{i.Amount_Paid}}</td> 
                <td>{{i.paid}}</td> 
                <td>{{i.order_id}}</td> 
                <td class="text-center">
                    {% if i.assigned == True%}
                            <i class="fas fa-check-circle text-success">
                    {% else %}
                            <i class="fas fa-check-circle text-danger"></i>
                    {% endif %}
                </td>
                <td><a class="btn rounded-pill btn-sm btn-info" href="{% url 'updateRequestCash' i.id %}">Update</a></td>   
                <td><a class="btn rounded-pill btn-sm btn-danger" href="{% url 'cancelRequestCash' i.id%}">Cancel</a></td>
                {% endfor %}
            </tr>
            <div class="pagination mb-3">
                <span class="step-links">
                    {% if page_obj2.has_previous %}
                        <a class="btn rounded-pill btn-warning" href="?page=1">&laquo; first</a>
                        <a class="btn rounded-pill btn-danger" href="?page={{ page_obj2.previous_page_number }}">previous</a>
                    {% endif %}
           
                    <span class="current">
                        Page {{ page_obj2.number }} of {{ page_obj2.paginator.num_pages }}
                    </span>
           
                    {% if page_obj2.has_next %}
                        <a class="btn btn-warning" href="?page={{ page_obj2.next_page_number }}">next</a>
                        <a class="btn btn-danger" href="?page={{ page_obj2.paginator2.num_pages }}">last &raquo;</a>
                {% endif %}
        </table>
    </div>
</div>
 {% endblock contentadmin %}