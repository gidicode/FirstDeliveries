{% extends "users/profile.html" %}
{% load crispy_forms_tags %}

{% block title %} Admin Dashboard {% endblock title %}

{% block contentadmin %}
 
<!--For Shopping List-->
<div class="row">
    <div class="col-md-12 col-sm-12, col-xl-12">
    <h6 class="p-3 sticky-top shadow-sm text-center text-dark">Shopping Request</h6>
        <table class="table table-striped table-dark">
            <thead>
            <tr>
                <th scope="col">No</th>
                <th scope="col">Customer</th>
                <th scope="col">Date</th>
                <th scope="col">View Items</th>
                <th scope="col">Status</th>
                <th scope="col">Amount Paid</th>
                <th scope="col">Service Charge</th>
                <th scope="col">Item Cost</th>
                <th scope="col">Total Amt Spent</th>
                <th scope="col">Amount Refunded</th>
                <th scope="col">Order ID</th>
                <th scope="col">Assigned</th>
                <th scope="col">Update</th>
                <th scope="col">Remove</th>
            </tr>
            </thead>
            <tbody>
            {% for i in page_obj3 %}
            <tr>
                <th scope="row">{{forloop.counter}}</th>
                <td>{{i.customer}}</td>
                <td>{{i.date_created|timesince}}</td>
                <td>
                    <div class="dropdown">
                        <p class=" dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          i
                        </p>
                        <div class="dropdown-menu p-2" style="background-color: rgb(0, 30, 202);" aria-labelledby="dropdownMenuButton">
                          <p class=" text-white"> {{i.List_Items}} </p>
                        </div>
                    </div>
                </td>
                <td>{{i.status}}</td> 
                <td>{{i.amount_paid}}</td> 
                <td>{{i.Charged}}</td> 
                <td>{{i.Item_Cost}}</td> 
                <td>{{i.Total}}</td>
                <td>{{i.Amount_Refunded}}</td>
                <td>{{i.order_id}}</td>
                <td class="text-center">
                    {% if i.assigned == True%}
                            <i class="fas fa-check-circle text-success">
                    {% else %}
                            <i class="fas fa-check-circle text-danger"></i>
                    {% endif %}
                </td>
                <td><a class="btn btn-sm rounded-pill btn-info" href="{% url 'updateRequestShopping' i.id %}">Update</a></td>   
                <td><a class="btn btn-sm rounded-pill btn-danger" href="{% url 'cancelRequestShopping' i.id%}">Cancel</a></td>
                {% endfor %}
            </tr>
            
        <div class="pagination">
            <span class="step-links">
                {% if page_obj3.has_previous %}
                    <a class="btn btn-warning" href="?page=1">&laquo; first</a>
                    <a class="btn btn-danger" href="?page={{ page_obj3.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ page_obj3.number }} of {{ page_obj3.paginator.num_pages }}.
                </span>

                {% if page_obj3.has_next %}
                    <a class="btn btn-warning" href="?page={{ page_obj3.next_page_number }}">next</a>
                    <a class="btn btn-danger" href="?page={{ page_obj3.paginator3.num_pages }}">last &raquo;</a>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock contentadmin %}