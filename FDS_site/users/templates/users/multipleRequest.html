{% extends "FDS_app/dashBase.html" %}
{% load crispy_forms_tags %}

{% block title %} Welocme {{user.username }} {% endblock title %}

{% block content2 %}
<div class="card card-body contianer">
    <form action="" method="POST" enctype="multipart/form-data"> 
        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Request For Dispatch Rider </legend>

        {% for form in c_formset %}
            {{ form }}
            <hr class="bg bg-secondary">
            {% endfor %}
        </fieldset>
        <button class="btn btn-outline-info" type="submit">Update</button>
    </form>
<!-- SPECIAL ENCODING TYPE TO FORM: we do this to pass our image data for our profile picture properly-->
</div>

{% endblock content2 %}

from django import forms
from django.contrib.auth.models import User
from django.contrib.auth import authenticate, get_user_model, login, logout

class UserSignupForm(forms.ModelForm):
    email = forms.EmailField(label='Confirm Email')
    password = forms.CharField(widget=forms.PasswordInput)
    class Meta:
        model = User
        fields = [
            'username',
            'email',
            'password'
        ]
    def clean_email(self):
        email = self.cleaned_data.get('email')
        email_qs = User.objects.filter(email=email)
        if email_qs.exists():
            raise forms.ValidationError("This email has already been registered")
        return email
